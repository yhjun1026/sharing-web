webpackJsonp([9],{502:function(e,t,s){s(724);var a=s(62)(s(619),s(755),null,null);e.exports=a.exports},619:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"articles",data:function(){var e=this;return{sGoods:{code:"",costPrice:"",currentQuantity:"",depositamt:"",description:"",laster:"",memo:"",name:"",picture:"",price:"",quantity:"",rentPrice:"",repayamt:"",state:"0",storeUuid:"",type:"",uuid:""},changed:0,type:"",orgCodeSquare:!1,squareName:"",checkList:["",""],checked:!0,defaultData:{currentQuantity:0},unit:[],searchForm:{quantity:0,currentQuantity:0,orgCode:"",code:"",name:"",price:0,costPrice:0,rentPrice:0,unit:"",picture:"",plazaName:"",remark:""},edit:"0/100",inputDisabled:!0,rules:{code:[{required:!0,message:"请输入物品编码",trigger:"change,blur"}],quantity:[{required:!0,message:"请输入总库存"},{pattern:/^(?:0|[1-9]{1}\d{0,5})$/,message:"请输入1~999999之间的整数"}],currentQuantity:[{required:!0,message:"请输入剩余库存"},{pattern:/^(?:0|[1-9]{1}\d{0,5})$/,message:"请输入1~999999之间的整数"}],name:[{required:!0,message:"请输入物品名称",trigger:"blur"},{validator:function(t,s,a){e.edit=s.length+"/100",s.length>=101?a(new Error("请输入100字以内的名称")):a()},trigger:"change,blur"}],unit:[{required:!0,message:"请选择规格",trigger:"change"}],price:[{required:!0,pattern:/^(?:0|[1-9]{1}\d{0,5})(\.\d{0,2})?$/,message:"请输入0~999999之间的数值",trigger:"change,blur"}],depositamt:[{required:!0,pattern:/^(?:0|[1-9]{1}\d{0,5})(\.\d{0,2})?$/,message:"请输入0~999999之间的数值",trigger:"change,blur"}],costPrice:[{required:!0,pattern:/^(?:0|[1-9]{1}\d{0,5})(\.\d{0,2})?$/,message:"请输入0~999999之间的数值",trigger:"change,blur"}],rentPrice:[{required:!0,pattern:/^(?:0|[1-9]{1}\d{0,5})(\.\d{0,2})?$/,message:"请输入0~999999之间的数值",trigger:"change,blur"}]},square:[],isEdit:!1,pointClass:"point-el"}},methods:{submit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.save()})},handleAvatarSuccess:function(e,t){console.log(e),this.sGoods.picture="http://www.xuemeiwanan.com/sharing/api/v1/file/"+e.data.fileId+"/",console.log(this.searchForm.picture)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,s=e.size/1024/1024<5;return t||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),s||this.$message.error("上传头像图片大小不能超过 5MB!"),t&&s},save:function(){var e=this;this.$axios({url:"/v1/goods/add",method:"POST",data:this.sGoods}).then(function(t){var s=t.data,a=(s.data,s.message),i=s.status;console.log(t),"0"==i?(e.changed=1,e.$router.push({path:"article-list"})):e.$message.error(a)})},update:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$axios({url:"/v1/goods/update",method:"POST",data:t.sGoods}).then(function(e){var s=e.data,a=(s.data,s.message),i=s.status;console.log(e),"0"==i?(t.$message({message:"修改成功！",type:"success"}),t.changed=1,t.$router.push({path:"article-list"})):t.$message.error(a)})})},cancel:function(){this.$router.push({path:"article-list"})},search:function(){var e=this,t=this.$route.query.id;this.$axios({url:"/v1/goods/get/"+t,method:"GET"}).then(function(t){var s=t.data,a=s.data;0===s.status&&(e.sGoods=a)}).catch(function(t){e.$message({message:"获取物品明细失败",type:"error"})})}},mounted:function(){this.$route.query.id&&(this.isEdit=!0,this.search())},beforeRouteLeave:function(e,t,s){"/"!=e.path&&this.changed<=0?this.$confirm("离开该页面后您编辑的所有数据将丢失，确定离开吗?","提示",{confirmButtonText:"去意已决",cancelButtonText:"再想想",customClass:"member-confirm-class"}).then(function(){s()}).catch(function(e){s(!1)}):s()}}},625:function(e,t,s){t=e.exports=s(486)(),t.push([e.i,".new-gift-box .grid-content{width:150px;height:100px;border:1px solid #e6e6e6;position:relative}.new-gift-box .el-form-item__label{position:relative;width:90px}.new-gift-box .el-form-item__label:before{position:absolute;left:-2px}.new-gift-box .left-label{margin-left:1.5em}.new-gift-box .readonly-item{display:block}.new-gift-box .grid-right p{width:170px;line-height:25px}.new-gift-box .grid-content .icon{position:absolute;top:50%;left:50%;margin-left:-7px;margin-top:-7px}.new-gift-box .yuan{position:absolute;top:0;left:213px}.new-gift-box .avatar-uploader .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.new-gift-box .avatar-uploader .el-upload:hover{border-color:#20a0ff}.new-gift-box .avatar-uploader-icon{font-size:28px;color:#8c939d;width:178px;height:178px;line-height:178px;text-align:center}.new-gift-box .avatar{width:178px;height:178px;display:block}.new-gift-box .point-el .el-form-item__error{left:100px;width:200px;display:none}.new-gift-box .point-el.point-el-vali .el-form-item__error{display:block}.new-gift-box .point-el .el-input__inner{border-color:#bfcbd9}.new-gift-box .point-el.point-el-vali.is-error .el-input__inner{border-color:#ff4949}.new-gift-confirmButtonClass{float:left;margin-left:120px!important}.new-gift-cancelButtonClass{margin-right:90px}",""])},724:function(e,t,s){var a=s(625);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s(487)("70afee43",a,!0)},755:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"title",rawName:"v-title",value:"物品管理",expression:"'物品管理'"}],staticClass:"new-gift-box ffan-style"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("i",{staticClass:"el-icon-edit"}),e._v("  \n      "),e.isEdit?s("span",[e._v("物品修改")]):e._e(),e._v(" "),e.isEdit?e._e():s("span",[e._v("物品新增")])]),e._v(" "),s("div",{staticClass:"content-wrap"},[s("el-form",{ref:"sGoods",staticStyle:{"padding-left":"20px"},attrs:{inline:!0,model:e.sGoods,rules:e.rules}},[s("div",[s("el-form-item",{attrs:{label:"物品编码:",prop:"code"}},[s("el-input",{staticStyle:{width:"211px"},attrs:{disabled:e.isEdit,placeholder:"物品编码"},model:{value:e.sGoods.code,callback:function(t){e.$set(e.sGoods,"code",t)},expression:"sGoods.code"}})],1)],1),e._v(" "),s("div",[s("el-form-item",{attrs:{label:"物品名称:",prop:"name"}},[s("el-input",{staticStyle:{width:"460px"},attrs:{type:"textarea",resize:"none",rows:2,placeholder:"请输入物品名称"},model:{value:e.sGoods.name,callback:function(t){e.$set(e.sGoods,"name",t)},expression:"sGoods.name"}}),e._v(" "),s("div",{staticStyle:{"z-index":"100","margin-left":"90%","margin-top":"-35px",color:"#e6e6e6"}},[e._v(e._s(e.edit))])],1)],1),e._v(" "),s("div",[s("el-form-item",{attrs:{label:"总库存:",prop:"quantity"}},[s("el-input",{staticStyle:{width:"211px"},attrs:{placeholder:"总库存"},model:{value:e.sGoods.quantity,callback:function(t){e.$set(e.sGoods,"quantity",t)},expression:"sGoods.quantity"}})],1),e._v(" "),s("el-form-item",{staticStyle:{"margin-left":"10px"},attrs:{label:"剩余库存:",prop:"currentQuantity"}},[s("el-input",{staticStyle:{width:"211px"},attrs:{placeholder:"剩余库存"},model:{value:e.sGoods.currentQuantity,callback:function(t){e.$set(e.sGoods,"currentQuantity",t)},expression:"sGoods.currentQuantity"}})],1)],1),e._v(" "),s("div",[s("el-form-item",{attrs:{label:"单价:",prop:"price"}},[s("el-input",{staticStyle:{width:"211px"},attrs:{placeholder:"单价"},model:{value:e.sGoods.price,callback:function(t){e.$set(e.sGoods,"price",t)},expression:"sGoods.price"}}),e._v(" "),s("span",{staticClass:"yuan"},[e._v("元")])],1),e._v(" "),s("el-form-item",{staticStyle:{"margin-left":"10px"},attrs:{label:"成本价格:",prop:"costPrice"}},[s("el-input",{staticStyle:{width:"211px"},attrs:{placeholder:"成本价格"},model:{value:e.sGoods.costPrice,callback:function(t){e.$set(e.sGoods,"costPrice",t)},expression:"sGoods.costPrice"}}),e._v(" "),s("span",{staticClass:"yuan"},[e._v("元")])],1)],1),e._v(" "),s("div",[s("el-form-item",{attrs:{label:"押金金额:",prop:"depositamt"}},[s("el-input",{staticStyle:{width:"211px"},attrs:{placeholder:"单价"},model:{value:e.sGoods.depositamt,callback:function(t){e.$set(e.sGoods,"depositamt",t)},expression:"sGoods.depositamt"}}),e._v(" "),s("span",{staticClass:"yuan"},[e._v("元")])],1)],1),e._v(" "),s("div",[s("el-form-item",{attrs:{label:"赔偿金额:",prop:"costPrice"}},[s("el-input",{staticStyle:{width:"211px"},attrs:{placeholder:"赔偿金额"},model:{value:e.sGoods.repayamt,callback:function(t){e.$set(e.sGoods,"repayamt",t)},expression:"sGoods.repayamt"}}),e._v(" "),s("span",{staticClass:"yuan"},[e._v("元")])],1),e._v(" "),s("el-form-item",{staticStyle:{"margin-left":"10px"},attrs:{label:"租用价格:",prop:"rentPrice"}},[s("el-input",{staticStyle:{width:"211px"},attrs:{placeholder:"租用价格"},model:{value:e.sGoods.rentPrice,callback:function(t){e.$set(e.sGoods,"rentPrice",t)},expression:"sGoods.rentPrice"}}),e._v(" "),s("span",{staticClass:"yuan"},[e._v("元")])],1)],1),e._v(" "),s("div",[s("el-form-item",{attrs:{label:"物品图片:",prop:"picture"}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/sharing/api/v1/file/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.sGoods.picture?s("img",{staticClass:"avatar",attrs:{src:e.sGoods.picture},model:{value:e.sGoods.picture,callback:function(t){e.$set(e.sGoods,"picture",t)},expression:"sGoods.picture"}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-right"},[s("p",[e._v("上传须知：")]),e._v(" "),s("p",[e._v("1.格式：JPG、JPEG、PNG")]),e._v(" "),s("p",[e._v("2.图片大小：不超过5M")])])])],1)],1)],1)]),e._v(" "),s("div",{staticStyle:{"text-align":"center"},attrs:{slot:"my-dialog-footer"},slot:"my-dialog-footer"},[e.isEdit?e._e():s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit("sGoods")}}},[e._v("保存")]),e._v(" "),e.isEdit?s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.update("sGoods")}}},[e._v("修改")]):e._e(),e._v(" "),s("el-button",{on:{click:function(t){e.cancel("sGoods")}}},[e._v("取 消")])],1)],1)])],1)},staticRenderFns:[]}}});