webpackJsonp([11],{498:function(e,t,i){i(723);var r=i(62)(i(615),i(753),null,null);e.exports=r.exports},615:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"articles",data:function(){var e=this;return{user:{code:"",groupUuid:"",memo:"",mobile:"",name:"",password:"88888888",stat:"1",storeuuid:"",type:"",uuid:""},edit:"0/100",rules:{code:[{required:!0,message:"请输入用户编码",trigger:"change,blur"}],name:[{required:!0,message:"请输入用户名称",trigger:"blur"},{validator:function(t,i,r){e.edit=i.length+"/100",i.length>=101?r(new Error("请输入100字以内的名称")):r()},trigger:"change,blur"}],mobile:[{required:!0,max:11,message:"请输入手机号",trigger:"change"},{max:11,message:"请输入正确手机号格式",trigger:"change"},{validator:this.phoneValidator,trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"change,blur"}],type:[{required:!0,message:"请选择用户类型",trigger:"change"}]},square:[],isEdit:!1,changed:0,pointClass:"point-el"}},methods:{phoneValidator:function(e,t,i){var r=/^1(3|4|5|7|8)\d{9}$/;""==t?i():null==t||r.test(t)?i():i(new Error("请输入正确手机号格式"))},submit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.save("add")})},update:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.save("update")})},save:function(e){var t=this,i="";i="add"===e?"/user/add":"/user/update",this.$axios({url:i,method:"POST",data:this.user}).then(function(e){var i=e.data,r=(i.data,i.message),a=i.status;console.log(e),"0"==a?(t.changed=1,t.$router.push({path:"/user/userlist"})):t.$message.error(r)})},cancel:function(){this.$router.push({path:"/user/userlist"})},getData:function(e){var t=this;this.$axios({url:"/user/get/"+e,method:"GET"}).then(function(e){var i=e.data,r=i.data;0==i.status&&(t.user=r,t.user.stat=t.user.stat.toString())}).catch(function(e){t.$message({message:"获取用户明细失败",type:"error"})})}},mounted:function(){this.$route.query.id&&(this.isEdit=!0),this.getData(this.$route.query.id)},beforeRouteLeave:function(e,t,i){"/"!=e.path&&this.changed<=0?this.$confirm("离开该页面后您编辑的所有数据将丢失，确定离开吗?","提示",{confirmButtonText:"去意已决",cancelButtonText:"再想想",customClass:"member-confirm-class"}).then(function(){i()}).catch(function(e){i(!1)}):i()}}},624:function(e,t,i){t=e.exports=i(486)(),t.push([e.i,".new-gift-box .grid-content{width:150px;height:100px;border:1px solid #e6e6e6;position:relative}.new-gift-box .el-form-item__label{position:relative;width:90px}.new-gift-box .el-form-item__label:before{position:absolute;left:-2px}.new-gift-box .left-label{margin-left:1.5em}.new-gift-box .readonly-item{display:block}.new-gift-box .grid-right p{width:170px;line-height:25px}.new-gift-box .grid-content .icon{position:absolute;top:50%;left:50%;margin-left:-7px;margin-top:-7px}.new-gift-box .yuan{position:absolute;top:0;left:213px}.new-gift-box .avatar-uploader .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.new-gift-box .avatar-uploader .el-upload:hover{border-color:#20a0ff}.new-gift-box .avatar-uploader-icon{font-size:28px;color:#8c939d;width:178px;height:178px;line-height:178px;text-align:center}.new-gift-box .avatar{width:178px;height:178px;display:block}.new-gift-box .point-el .el-form-item__error{left:100px;width:200px;display:none}.new-gift-box .point-el.point-el-vali .el-form-item__error{display:block}.new-gift-box .point-el .el-input__inner{border-color:#bfcbd9}.new-gift-box .point-el.point-el-vali.is-error .el-input__inner{border-color:#ff4949}.new-gift-confirmButtonClass{float:left;margin-left:120px!important}.new-gift-cancelButtonClass{margin-right:90px}",""])},723:function(e,t,i){var r=i(624);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);i(487)("3e51f1d6",r,!0)},753:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"title",rawName:"v-title",value:"用户管理",expression:"'用户管理'"}],staticClass:"new-gift-box ffan-style"},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("i",{staticClass:"el-icon-edit"}),e._v("  \n      "),e.isEdit?i("span",[e._v("用户修改")]):e._e(),e._v(" "),e.isEdit?e._e():i("span",[e._v("用户新增")])]),e._v(" "),i("div",{staticClass:"content-wrap"},[i("el-form",{ref:"user",staticStyle:{"padding-left":"20px"},attrs:{inline:!0,model:e.user,rules:e.rules}},[i("div",[i("el-form-item",{attrs:{label:"用户编码:",prop:"code"}},[i("el-input",{staticStyle:{width:"211px"},attrs:{disabled:e.isEdit,placeholder:"用户编码"},model:{value:e.user.code,callback:function(t){e.$set(e.user,"code",t)},expression:"user.code"}})],1)],1),e._v(" "),i("div",[i("el-form-item",{attrs:{label:"用户名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"460px"},attrs:{type:"textarea",resize:"none",rows:2,placeholder:"请输入用户名称"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}}),e._v(" "),i("div",{staticStyle:{"z-index":"100","margin-left":"90%","margin-top":"-35px",color:"#e6e6e6"}},[e._v(e._s(e.edit))])],1)],1),e._v(" "),i("div",[i("el-form-item",{attrs:{label:"用户类型:",prop:"type"}},[i("el-select",{attrs:{placeholder:"请选择用户类型"},model:{value:e.user.type,callback:function(t){e.$set(e.user,"type",t)},expression:"user.type"}},[i("el-option",{attrs:{label:"管理员",value:"admin"}}),e._v(" "),i("el-option",{attrs:{label:"营业员",value:"employ"}})],1)],1)],1),e._v(" "),i("div",[i("el-form-item",{attrs:{label:"联系方式:",prop:"mobile"}},[i("el-input",{staticStyle:{width:"211px"},attrs:{placeholder:"联系方式"},model:{value:e.user.mobile,callback:function(t){e.$set(e.user,"mobile",t)},expression:"user.mobile"}})],1)],1),e._v(" "),i("div",[i("el-form-item",{attrs:{label:"状态:",prop:"stat",required:!0}},[i("el-radio-group",{model:{value:e.user.stat,callback:function(t){e.$set(e.user,"stat",t)},expression:"user.stat"}},[i("el-radio",{attrs:{label:"1"}},[e._v("启用")]),e._v(" "),i("el-radio",{attrs:{label:"0"}},[e._v("停用")])],1)],1)],1),e._v(" "),e.isEdit?e._e():i("div",[i("el-form-item",{attrs:{label:"密码:",prop:"password"}},[i("el-input",{staticStyle:{width:"211px"},attrs:{type:"password",placeholder:"密码"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),e._v("\n            (初始密码88888888)\n          ")],1)],1),e._v(" "),i("div",[i("el-form-item",{attrs:{label:"备注：",prop:"memo"}},[i("el-input",{staticStyle:{width:"500px"},attrs:{size:"small",type:"textarea",rows:4},model:{value:e.user.memo,callback:function(t){e.$set(e.user,"memo",t)},expression:"user.memo"}})],1)],1)]),e._v(" "),i("div",{staticStyle:{"text-align":"center"},attrs:{slot:"my-dialog-footer"},slot:"my-dialog-footer"},[e.isEdit?e._e():i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit("user")}}},[e._v("保存")]),e._v(" "),e.isEdit?i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.update("user")}}},[e._v("修改")]):e._e(),e._v(" "),i("el-button",{on:{click:function(t){e.cancel("user")}}},[e._v("取 消")])],1)],1)])],1)},staticRenderFns:[]}}});